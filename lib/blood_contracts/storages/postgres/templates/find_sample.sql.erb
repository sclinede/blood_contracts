SELECT '/' || session || '/' || contract || '/' || period || '/' || rule || '/' || round as sample_path
FROM <%= samples_table_name %>
WHERE contract ~ '<%= connection.escape_string(contract_name) %>'
AND session ~ '<%= connection.escape_string(session_name) %>'
AND period::text ~ '<%= sampling_period_name %>'
AND round::text ~ '<%= round_name %>'
AND rule ~ '<%= connection.escape_string(@rule_name) %>'
ORDER BY created_at DESC
LIMIT 1;
